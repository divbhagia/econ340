<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Div Bhagia">

<title>Economic Research Methods - | ECON 340 | Economics Research Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head><body class="nav-fixed">\renewcommand{\tightlist}{\setlength{\itemsep}{10pt}\setlength{\parskip}{0pt}}


<link rel="stylesheet" href="../../assets/styles.css">




<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Economic Research Methods</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content.html" rel="" target="">
 <span class="menu-text">Content</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research-project.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#so-far" id="toc-so-far" class="nav-link active" data-scroll-target="#so-far">So far</a></li>
  <li><a href="#tabulating-variables" id="toc-tabulating-variables" class="nav-link" data-scroll-target="#tabulating-variables">Tabulating Variables</a></li>
  <li><a href="#dplyr-syntax" id="toc-dplyr-syntax" class="nav-link" data-scroll-target="#dplyr-syntax">Dplyr Syntax</a></li>
  <li><a href="#dplyr-syntax-1" id="toc-dplyr-syntax-1" class="nav-link" data-scroll-target="#dplyr-syntax-1">Dplyr Syntax</a></li>
  <li><a href="#some-useful-dplyr-functions" id="toc-some-useful-dplyr-functions" class="nav-link" data-scroll-target="#some-useful-dplyr-functions">Some Useful <code>dplyr</code> Functions</a></li>
  <li><a href="#select-variables" id="toc-select-variables" class="nav-link" data-scroll-target="#select-variables">Select Variables</a></li>
  <li><a href="#finding-correlation" id="toc-finding-correlation" class="nav-link" data-scroll-target="#finding-correlation">Finding Correlation</a></li>
  <li><a href="#filter-observations" id="toc-filter-observations" class="nav-link" data-scroll-target="#filter-observations">Filter Observations</a></li>
  <li><a href="#and-and-or-in-r" id="toc-and-and-or-in-r" class="nav-link" data-scroll-target="#and-and-or-in-r"><em>And</em> and <em>Or</em> in R</a></li>
  <li><a href="#summarize-variables" id="toc-summarize-variables" class="nav-link" data-scroll-target="#summarize-variables">Summarize Variables</a></li>
  <li><a href="#creating-new-variables" id="toc-creating-new-variables" class="nav-link" data-scroll-target="#creating-new-variables">Creating New Variables</a></li>
  <li><a href="#creating-new-variables-1" id="toc-creating-new-variables-1" class="nav-link" data-scroll-target="#creating-new-variables-1">Creating New Variables</a></li>
  <li><a href="#combining-group_by-and-summarise" id="toc-combining-group_by-and-summarise" class="nav-link" data-scroll-target="#combining-group_by-and-summarise">Combining <code>group_by()</code> and <code>summarise()</code></a></li>
  <li><a href="#excercise-for-you" id="toc-excercise-for-you" class="nav-link" data-scroll-target="#excercise-for-you">Excercise for you</a></li>
  <li><a href="#whats-next" id="toc-whats-next" class="nav-link" data-scroll-target="#whats-next">What’s next?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><p>ECON 340<br>
Economics Research Methods</p></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Div Bhagia </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="so-far" class="level3">
<h3 class="anchored" data-anchor-id="so-far">So far</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set directory (optional)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#setwd("~/Dropbox (CSU Fullerton)/Econ340_R")</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"caschool.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can clear your environment before starting by using the broom on the top-right. Or add <code>rm(list=ls())</code> command on top of your R-script.</p>
</section>
<section id="tabulating-variables" class="level3">
<h3 class="anchored" data-anchor-id="tabulating-variables">Tabulating Variables</h3>
<ul>
<li><p>Variable <code>gr_span</code> reports the grade span of a school district (K-6 or K-8)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>gr_span)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
KK-06 KK-08 
   61   359 </code></pre>
</div>
</div></li>
<li><p>So 61 school districts go up to grade 6 while 359 go up to grade 8</p></li>
</ul>
</section>
<section id="dplyr-syntax" class="level3">
<h3 class="anchored" data-anchor-id="dplyr-syntax">Dplyr Syntax</h3>
<ul>
<li><code>dplyr</code> is a <code>TidyVerse</code> package that provides several useful functions for data manipulation</li>
<li>However, <code>dplyr</code> uses slightly different syntax from base R.</li>
<li>One key operator utilized by this package is the pipe operator <code>%&gt;%</code></li>
<li>You can use shortcut Cmd + Shift + M (Mac) and Ctrl + Shift + M (Windows) for <code>%&gt;%</code></li>
<li>You can think of this operator as standing for “then” in the code</li>
</ul>
</section>
<section id="dplyr-syntax-1" class="level3">
<h3 class="anchored" data-anchor-id="dplyr-syntax-1">Dplyr Syntax</h3>
<p>For example, to tabulate data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">count</span>(gr_span)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gr_span   n
1   KK-06  61
2   KK-08 359</code></pre>
</div>
</div>
</section>
<section id="some-useful-dplyr-functions" class="level3">
<h3 class="anchored" data-anchor-id="some-useful-dplyr-functions">Some Useful <code>dplyr</code> Functions</h3>
<ul>
<li><code>mutate()</code> adds new variables that are functions of existing variables</li>
<li><code>select()</code> picks variables based on their names</li>
<li><code>filter()</code> picks cases based on their values</li>
<li><code>summarise()</code> reduces multiple values down to a single summary</li>
<li><code>arrange()</code> changes the ordering of rows</li>
<li><code>group_by()</code> performs subsequent calculations within-group (and ungroup() when done)</li>
</ul>
</section>
<section id="select-variables" class="level3">
<h3 class="anchored" data-anchor-id="select-variables">Select Variables</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">select</span>(computer, enrl_tot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    computer enrl_tot
1         67      195
2        101      240
3        169     1550
4         85      243
5        171     1335
6         25      137
7         28      195
8         66      888
9         35      379
10         0     2247
11        86      446
12        56      987
13        25      103
14         0      487
15        31      649
16        80      852
17       100      491
18        50      421
19       960     6880
20       139     2688
21        69      440
22        53      475
23       169     2538
24         0      476
25       216     2357
26       198     1588
27       742     7306
28       269     2601
29        67      847
30        55      452
31       569     4142
32       224     2102
33       721    10012
34       202     2488
35      1713    25151
36       177     2267
37       204     1657
38        18      284
39       562     5370
40       275     2471
41      1762    15386
42        40      184
43        78     1217
44       571     6219
45       324     4258
46       175     1235
47      1423    16244
48        85      814
49      3324    27176
50      1306    10696
51       786     8935
52       242     1600
53       669     9028
54       896    10625
55       560     7151
56       202     2404
57       480     5804
58       196     2253
59       152     2807
60       249     3074
61        45      723
62       560     5138
63      1048    20927
64       496     3017
65       149      957
66       287     1639
67       284     4340
68       585     5079
69       505     6639
70       129     1154
71        13      237
72       273     2987
73        94      499
74      1248    11474
75       107     1088
76       259     2660
77         8      353
78        37      329
79        32      252
80        31      175
81       897     3835
82         8      314
83       445     4458
84       112     1313
85        36      474
86       277     1114
87       178     1358
88      1015    11629
89      1261     6195
90        35      499
91        27      417
92        55      300
93        50      457
94        34      146
95        71      460
96        28      354
97       315     1841
98       717     3760
99        70      500
100      383     5112
101       28      146
102      134     2141
103      144      610
104       26      337
105      597     4501
106      313     5718
107     1182    19402
108      560     3401
109      397     2621
110       87      426
111       24      205
112     1321    13668
113       98      342
114      499     6518
115       30      239
116      281     2911
117     1338     6272
118     1435    10218
119      222     1735
120       96      474
121      145      544
122      283     1987
123       50      418
124       40      196
125       92     2208
126      165     1255
127       65     1469
128      680     7114
129      170     1962
130      658     7761
131       47      216
132       31      224
133     1004     7887
134        0      752
135     1719     9328
136       35      548
137       19      104
138        4      275
139       52      443
140     1268    10337
141       36      806
142       25      227
143     1333     8416
144       30      149
145       48      220
146      601     4612
147       71      590
148       25      133
149      116     2440
150        0      133
151       65      519
152       30      222
153       36      285
154      471     3129
155      167     2019
156      316     5620
157     1218     9775
158       38      246
159      800     7210
160     2889    21338
161       27      477
162       50      727
163       46      374
164     2001    18255
165     1058     8787
166       60      797
167       40      140
168       51      235
169     1295     8294
170      354     2409
171       16      150
172      606     3981
173      345     2326
174      163      501
175       48      470
176       59      575
177      789     3519
178       61      474
179       60      223
180       22       92
181      500     4971
182      226     2617
183       32      242
184       75      780
185       50      324
186       25      140
187       26      181
188       65      516
189       25      108
190       58      419
191     1099    12567
192       65      287
193      634     6201
194      134      577
195       41      170
196       36      164
197       75      382
198      250     1221
199      213     2214
200      409     4523
201       49      793
202      254     1678
203       35      536
204       36      307
205       56      347
206       30      168
207       81      532
208      374     3272
209      268     2045
210        7      156
211      164     1129
212      500     3669
213       19      157
214      618     4928
215       13      103
216       17      175
217      241     4153
218       67      280
219       96      865
220     1120     8735
221       72      412
222      624     6373
223       73      332
224      192     2903
225       60      565
226       78      586
227      626     5068
228      118      859
229       20      145
230      155      649
231      435     1789
232       50      775
233      148      777
234      419     3518
235     2401    19294
236     1158     7661
237       34      158
238       42      117
239       37      160
240       30      511
241      296     2770
242       46      551
243      474     5205
244      622     6437
245      122     1712
246       56      370
247      328     3182
248       32      139
249     1507    11855
250      129     1068
251      224     2295
252      141     1510
253       60      579
254      140     1012
255      107     1212
256       23      119
257       78      590
258       60      546
259       51      248
260      150      461
261      496     6312
262       62      285
263      302     2325
264     1790    11885
265       46      564
266     1671    12380
267      529     3772
268       70      895
269      489     5714
270       16      105
271      125     1449
272       95      510
273       39      160
274       50      433
275      411     3186
276      576     5010
277      100      717
278      335     3548
279       78      868
280       60      507
281      105      822
282      143     1792
283      190     1202
284       58      515
285      263     1354
286      113     1252
287      127      823
288      258     2231
289       81      271
290       85      309
291      308     3005
292      114      966
293      814     7710
294       54      762
295      206     1708
296     1113     9850
297       10      129
298     1150    10619
299      494     4521
300      114      580
301      326     2569
302      756     6022
303       47      670
304     1962    14708
305      706     6601
306       87      675
307      193     2458
308       14      144
309       48      573
310       82      721
311      160      992
312        0     8432
313       15      244
314      785     7116
315       95      830
316       38      160
317      220     1588
318      307     2272
319       65     1425
320       30      245
321      259     1349
322       65      400
323      637     4632
324       15      224
325       92      576
326       75      451
327      145      900
328       10      118
329        0     1457
330      586     4734
331      379     3303
332      540     6055
333       39      424
334      615     2801
335       37      187
336       17      129
337       41      188
338      116     1212
339      249     2596
340      753     4925
341      930     6257
342      122      868
343      934     3787
344      855     6423
345       47      678
346       23      162
347      834     8529
348      231     1862
349      183     1452
350       32      155
351      343     2536
352      103      567
353      135      953
354       42      296
355       24      198
356       49      218
357      117      734
358       50      189
359      482     2528
360      290     2987
361       21      208
362       29      379
363       27      145
364      103      706
365      105      878
366       75      594
367       40      139
368      318     2089
369       42      326
370       50      516
371       50      449
372       70      297
373      165     1579
374       49      383
375       14       81
376      701     5259
377      223     1960
378       31      151
379      310      946
380      300     2707
381      141      919
382      216      945
383      220      738
384       35      164
385       29      167
386       25      125
387      113     1091
388       27      134
389       55      600
390      283     1803
391       15      158
392      439     2392
393       33      526
394       44      141
395       30      235
396      406     3280
397        0     1254
398      155      948
399     2232    15228
400       21       81
401      540     2768
402       84      535
403      404     2542
404      265     1940
405      272     1059
406      403     2340
407      496     3469
408      300     2106
409      112      478
410      241     1885
411      466     2422
412      412     1318
413       22      220
414      209      687
415      286     2341
416      195      984
417      721     3724
418       45      441
419       14      101
420      313     1778</code></pre>
</div>
</div>
</section>
<section id="finding-correlation" class="level3">
<h3 class="anchored" data-anchor-id="finding-correlation">Finding Correlation</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(data<span class="sc">$</span>computer, data<span class="sc">$</span>enrl_tot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9288821</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy way</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">select</span>(computer, enrl_tot) <span class="sc">%&gt;%</span> <span class="fu">cor</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          computer  enrl_tot
computer 1.0000000 0.9288821
enrl_tot 0.9288821 1.0000000</code></pre>
</div>
</div>
</section>
<section id="filter-observations" class="level3">
<h3 class="anchored" data-anchor-id="filter-observations">Filter Observations</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">select</span>(gr_span, computer) <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gr_span<span class="sc">==</span><span class="st">"KK-06"</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gr_span computer
1    KK-06        0
2    KK-06      742
3    KK-06      324
4    KK-06      669
5    KK-06      196
6    KK-06      560
7    KK-06     1048
8    KK-06      505
9    KK-06      129
10   KK-06      178
11   KK-06      499
12   KK-06     1435
13   KK-06       65
14   KK-06     1268
15   KK-06     2889
16   KK-06     1295
17   KK-06      354
18   KK-06       16
19   KK-06       59
20   KK-06      500
21   KK-06       65
22   KK-06       67
23   KK-06      474
24   KK-06       32
25   KK-06       23
26   KK-06      576
27   KK-06      143
28   KK-06       58
29   KK-06      113
30   KK-06      258
31   KK-06       81
32   KK-06      308
33   KK-06      494
34   KK-06      326
35   KK-06       38
36   KK-06      220
37   KK-06       30
38   KK-06      145
39   KK-06      586
40   KK-06      540
41   KK-06       41
42   KK-06      834
43   KK-06       32
44   KK-06      117
45   KK-06       50
46   KK-06      701
47   KK-06       31
48   KK-06      300
49   KK-06      216
50   KK-06       35
51   KK-06       29
52   KK-06       27
53   KK-06       15
54   KK-06       44
55   KK-06       30
56   KK-06        0
57   KK-06       21
58   KK-06       84
59   KK-06      404
60   KK-06      300
61   KK-06       22</code></pre>
</div>
</div>
</section>
<section id="and-and-or-in-r" class="level3">
<h3 class="anchored" data-anchor-id="and-and-or-in-r"><em>And</em> and <em>Or</em> in R</h3>
<p>To select schools in Orange county with enrollment over 5000</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county<span class="sc">==</span><span class="st">"Orange"</span> <span class="sc">&amp;</span> enrl_tot<span class="sc">&gt;=</span><span class="dv">5000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To select schools that are either in Orange country or in LA county</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county<span class="sc">==</span><span class="st">"Orange"</span> <span class="sc">|</span> county<span class="sc">==</span><span class="st">"Los Angeles"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="summarize-variables" class="level3">
<h3 class="anchored" data-anchor-id="summarize-variables">Summarize Variables</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating mean</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">mean</span>(computer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  mean(computer)
1       303.3833</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard deviation and median</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">sd =</span> <span class="fu">sd</span>(computer), </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">med =</span> <span class="fu">median</span>(comp_stu))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        sd       med
1 441.3413 0.1254644</code></pre>
</div>
</div>
</section>
<section id="creating-new-variables" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-variables">Creating New Variables</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_enrl =</span> <span class="fu">log</span>(enrl_tot))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>The code takes <code>data</code> and adds a new column <code>log_enrl</code>, which is the log of <code>enrl_tot</code></li>
<li>It then updates the original data with this new column.</li>
</ul>
</section>
<section id="creating-new-variables-1" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-variables-1">Creating New Variables</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hcomp =</span> <span class="fu">ifelse</span>(comp_stu<span class="sc">&gt;=</span><span class="fu">median</span>(comp_stu),<span class="dv">1</span>,<span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Syntax: <code>ifelse(test_expression, x, y)</code></li>
<li>The returned vector has element from <code>x</code> if the corresponding value of <code>test_expression</code> is <code>TRUE</code> and <code>y</code> if it is <code>FALSE</code></li>
<li>So here <code>hcomp</code> takes value 1 whenever computers per student are above the median, and 0 otherwise. What should be the output from <code>mean(data$hcomp)</code>?</li>
</ul>
</section>
<section id="combining-group_by-and-summarise" class="level3">
<h3 class="anchored" data-anchor-id="combining-group_by-and-summarise">Combining <code>group_by()</code> and <code>summarise()</code></h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hcomp) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(comp_stu))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  hcomp `mean(comp_stu)`
  &lt;dbl&gt;            &lt;dbl&gt;
1     0           0.0881
2     1           0.184 </code></pre>
</div>
</div>
</section>
<section id="excercise-for-you" class="level3">
<h3 class="anchored" data-anchor-id="excercise-for-you">Excercise for you</h3>
<p>Find the county with the highest average number of computers per student (<code>comp_stu</code>) (Hint: Use <code>group_by(county)</code> and <code>summarise()</code>)</p>
</section>
<section id="whats-next" class="level3">
<h3 class="anchored" data-anchor-id="whats-next">What’s next?</h3>
<ul>
<li>Next class we will continue with R</li>
<li>Problem set 2 is available on Canvas and is due next Tuesday (09/19)</li>
<li>Get in touch with your research group partner(s) and start thinking about your project</li>
<li>Research Paper First Submission is due in two weeks (09/26)</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">2024 Div Bhagia | <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0 License</a> |Made with <a href="https://quarto.org/">Quarto</a></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>